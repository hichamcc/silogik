/*! For license information please see fortressdb_page_tables.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("FDBLib"),require("fortressdb"),require("FDBLib").Components):"function"==typeof define&&define.amd?define("fortressdb",["FDBLib","fortressdb"],t):"object"==typeof exports?exports.fortressdb=t(require("FDBLib"),require("fortressdb"),require("FDBLib").Components):(e.fortressdb=e.fortressdb||{},e.fortressdb.pages=e.fortressdb.pages||{},e.fortressdb.pages.tables=t(e.FDBLib,e.fortressdb,e.FDBLib.Components))}(self,(function(e,t,r){return(()=>{var n={454:e=>{"use strict";const t=(e,t,r)=>{const n=r<0?e.length+r:r,a=e.splice(t,1)[0];e.splice(n,0,a)},r=(e,r,n)=>(e=e.slice(),t(e,r,n),e);e.exports=r,e.exports.default=r,e.exports.mutate=t},4184:(e,t)=>{var r;!function(){"use strict";var n={}.hasOwnProperty;function a(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var o=typeof r;if("string"===o||"number"===o)e.push(r);else if(Array.isArray(r)){if(r.length){var u=a.apply(null,r);u&&e.push(u)}}else if("object"===o)if(r.toString===Object.prototype.toString)for(var c in r)n.call(r,c)&&r[c]&&e.push(c);else e.push(r.toString())}}return e.join(" ")}e.exports?(a.default=a,e.exports=a):void 0===(r=function(){return a}.apply(t,[]))||(e.exports=r)}()},8552:(e,t,r)=>{var n=r(852)(r(5639),"DataView");e.exports=n},1989:(e,t,r)=>{var n=r(1789),a=r(401),o=r(7667),u=r(1327),c=r(1866);function s(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}s.prototype.clear=n,s.prototype.delete=a,s.prototype.get=o,s.prototype.has=u,s.prototype.set=c,e.exports=s},8407:(e,t,r)=>{var n=r(7040),a=r(4125),o=r(2117),u=r(7518),c=r(4705);function s(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}s.prototype.clear=n,s.prototype.delete=a,s.prototype.get=o,s.prototype.has=u,s.prototype.set=c,e.exports=s},7071:(e,t,r)=>{var n=r(852)(r(5639),"Map");e.exports=n},3369:(e,t,r)=>{var n=r(4785),a=r(1285),o=r(6e3),u=r(9916),c=r(5265);function s(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}s.prototype.clear=n,s.prototype.delete=a,s.prototype.get=o,s.prototype.has=u,s.prototype.set=c,e.exports=s},3818:(e,t,r)=>{var n=r(852)(r(5639),"Promise");e.exports=n},8525:(e,t,r)=>{var n=r(852)(r(5639),"Set");e.exports=n},8668:(e,t,r)=>{var n=r(3369),a=r(619),o=r(2385);function u(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new n;++t<r;)this.add(e[t])}u.prototype.add=u.prototype.push=a,u.prototype.has=o,e.exports=u},6384:(e,t,r)=>{var n=r(8407),a=r(7465),o=r(3779),u=r(7599),c=r(4758),s=r(4309);function i(e){var t=this.__data__=new n(e);this.size=t.size}i.prototype.clear=a,i.prototype.delete=o,i.prototype.get=u,i.prototype.has=c,i.prototype.set=s,e.exports=i},2705:(e,t,r)=>{var n=r(5639).Symbol;e.exports=n},1149:(e,t,r)=>{var n=r(5639).Uint8Array;e.exports=n},577:(e,t,r)=>{var n=r(852)(r(5639),"WeakMap");e.exports=n},6874:e=>{e.exports=function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}},4963:e=>{e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length,a=0,o=[];++r<n;){var u=e[r];t(u,r,e)&&(o[a++]=u)}return o}},4636:(e,t,r)=>{var n=r(2545),a=r(5694),o=r(1469),u=r(4144),c=r(5776),s=r(6719),i=Object.prototype.hasOwnProperty;e.exports=function(e,t){var r=o(e),l=!r&&a(e),f=!r&&!l&&u(e),p=!r&&!l&&!f&&s(e),d=r||l||f||p,b=d?n(e.length,String):[],v=b.length;for(var y in e)!t&&!i.call(e,y)||d&&("length"==y||f&&("offset"==y||"parent"==y)||p&&("buffer"==y||"byteLength"==y||"byteOffset"==y)||c(y,v))||b.push(y);return b}},9932:e=>{e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length,a=Array(n);++r<n;)a[r]=t(e[r],r,e);return a}},2488:e=>{e.exports=function(e,t){for(var r=-1,n=t.length,a=e.length;++r<n;)e[a+r]=t[r];return e}},2663:e=>{e.exports=function(e,t,r,n){var a=-1,o=null==e?0:e.length;for(n&&o&&(r=e[++a]);++a<o;)r=t(r,e[a],a,e);return r}},2908:e=>{e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}},9029:e=>{var t=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;e.exports=function(e){return e.match(t)||[]}},8470:(e,t,r)=>{var n=r(7813);e.exports=function(e,t){for(var r=e.length;r--;)if(n(e[r][0],t))return r;return-1}},4140:(e,t,r)=>{var n=r(7816),a=r(9291)(n);e.exports=a},1078:(e,t,r)=>{var n=r(2488),a=r(7285);e.exports=function e(t,r,o,u,c){var s=-1,i=t.length;for(o||(o=a),c||(c=[]);++s<i;){var l=t[s];r>0&&o(l)?r>1?e(l,r-1,o,u,c):n(c,l):u||(c[c.length]=l)}return c}},8483:(e,t,r)=>{var n=r(5063)();e.exports=n},7816:(e,t,r)=>{var n=r(8483),a=r(3674);e.exports=function(e,t){return e&&n(e,t,a)}},7786:(e,t,r)=>{var n=r(1811),a=r(327);e.exports=function(e,t){for(var r=0,o=(t=n(t,e)).length;null!=e&&r<o;)e=e[a(t[r++])];return r&&r==o?e:void 0}},8866:(e,t,r)=>{var n=r(2488),a=r(1469);e.exports=function(e,t,r){var o=t(e);return a(e)?o:n(o,r(e))}},4239:(e,t,r)=>{var n=r(2705),a=r(9607),o=r(2333),u=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":u&&u in Object(e)?a(e):o(e)}},13:e=>{e.exports=function(e,t){return null!=e&&t in Object(e)}},9454:(e,t,r)=>{var n=r(4239),a=r(7005);e.exports=function(e){return a(e)&&"[object Arguments]"==n(e)}},939:(e,t,r)=>{var n=r(2492),a=r(7005);e.exports=function e(t,r,o,u,c){return t===r||(null==t||null==r||!a(t)&&!a(r)?t!=t&&r!=r:n(t,r,o,u,e,c))}},2492:(e,t,r)=>{var n=r(6384),a=r(7114),o=r(8351),u=r(6096),c=r(4160),s=r(1469),i=r(4144),l=r(6719),f="[object Arguments]",p="[object Array]",d="[object Object]",b=Object.prototype.hasOwnProperty;e.exports=function(e,t,r,v,y,m){var h=s(e),x=s(t),g=h?p:c(e),O=x?p:c(t),j=(g=g==f?d:g)==d,w=(O=O==f?d:O)==d,E=g==O;if(E&&i(e)){if(!i(t))return!1;h=!0,j=!1}if(E&&!j)return m||(m=new n),h||l(e)?a(e,t,r,v,y,m):o(e,t,g,r,v,y,m);if(!(1&r)){var _=j&&b.call(e,"__wrapped__"),S=w&&b.call(t,"__wrapped__");if(_||S){var P=_?e.value():e,k=S?t.value():t;return m||(m=new n),y(P,k,r,v,m)}}return!!E&&(m||(m=new n),u(e,t,r,v,y,m))}},2958:(e,t,r)=>{var n=r(6384),a=r(939);e.exports=function(e,t,r,o){var u=r.length,c=u,s=!o;if(null==e)return!c;for(e=Object(e);u--;){var i=r[u];if(s&&i[2]?i[1]!==e[i[0]]:!(i[0]in e))return!1}for(;++u<c;){var l=(i=r[u])[0],f=e[l],p=i[1];if(s&&i[2]){if(void 0===f&&!(l in e))return!1}else{var d=new n;if(o)var b=o(f,p,l,e,t,d);if(!(void 0===b?a(p,f,3,o,d):b))return!1}}return!0}},8458:(e,t,r)=>{var n=r(3560),a=r(5346),o=r(3218),u=r(346),c=/^\[object .+?Constructor\]$/,s=Function.prototype,i=Object.prototype,l=s.toString,f=i.hasOwnProperty,p=RegExp("^"+l.call(f).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!o(e)||a(e))&&(n(e)?p:c).test(u(e))}},8749:(e,t,r)=>{var n=r(4239),a=r(1780),o=r(7005),u={};u["[object Float32Array]"]=u["[object Float64Array]"]=u["[object Int8Array]"]=u["[object Int16Array]"]=u["[object Int32Array]"]=u["[object Uint8Array]"]=u["[object Uint8ClampedArray]"]=u["[object Uint16Array]"]=u["[object Uint32Array]"]=!0,u["[object Arguments]"]=u["[object Array]"]=u["[object ArrayBuffer]"]=u["[object Boolean]"]=u["[object DataView]"]=u["[object Date]"]=u["[object Error]"]=u["[object Function]"]=u["[object Map]"]=u["[object Number]"]=u["[object Object]"]=u["[object RegExp]"]=u["[object Set]"]=u["[object String]"]=u["[object WeakMap]"]=!1,e.exports=function(e){return o(e)&&a(e.length)&&!!u[n(e)]}},7206:(e,t,r)=>{var n=r(1573),a=r(6432),o=r(6557),u=r(1469),c=r(9601);e.exports=function(e){return"function"==typeof e?e:null==e?o:"object"==typeof e?u(e)?a(e[0],e[1]):n(e):c(e)}},280:(e,t,r)=>{var n=r(5726),a=r(6916),o=Object.prototype.hasOwnProperty;e.exports=function(e){if(!n(e))return a(e);var t=[];for(var r in Object(e))o.call(e,r)&&"constructor"!=r&&t.push(r);return t}},9199:(e,t,r)=>{var n=r(4140),a=r(8612);e.exports=function(e,t){var r=-1,o=a(e)?Array(e.length):[];return n(e,(function(e,n,a){o[++r]=t(e,n,a)})),o}},1573:(e,t,r)=>{var n=r(2958),a=r(1499),o=r(2634);e.exports=function(e){var t=a(e);return 1==t.length&&t[0][2]?o(t[0][0],t[0][1]):function(r){return r===e||n(r,e,t)}}},6432:(e,t,r)=>{var n=r(939),a=r(7361),o=r(9095),u=r(5403),c=r(9162),s=r(2634),i=r(327);e.exports=function(e,t){return u(e)&&c(t)?s(i(e),t):function(r){var u=a(r,e);return void 0===u&&u===t?o(r,e):n(t,u,3)}}},9556:(e,t,r)=>{var n=r(9932),a=r(7786),o=r(7206),u=r(9199),c=r(1131),s=r(1717),i=r(5022),l=r(6557),f=r(1469);e.exports=function(e,t,r){t=t.length?n(t,(function(e){return f(e)?function(t){return a(t,1===e.length?e[0]:e)}:e})):[l];var p=-1;t=n(t,s(o));var d=u(e,(function(e,r,a){return{criteria:n(t,(function(t){return t(e)})),index:++p,value:e}}));return c(d,(function(e,t){return i(e,t,r)}))}},371:e=>{e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},9152:(e,t,r)=>{var n=r(7786);e.exports=function(e){return function(t){return n(t,e)}}},8674:e=>{e.exports=function(e){return function(t){return null==e?void 0:e[t]}}},5976:(e,t,r)=>{var n=r(6557),a=r(5357),o=r(61);e.exports=function(e,t){return o(a(e,t,n),e+"")}},6560:(e,t,r)=>{var n=r(5703),a=r(8777),o=r(6557),u=a?function(e,t){return a(e,"toString",{configurable:!0,enumerable:!1,value:n(t),writable:!0})}:o;e.exports=u},1131:e=>{e.exports=function(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}},2545:e=>{e.exports=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}},531:(e,t,r)=>{var n=r(2705),a=r(9932),o=r(1469),u=r(3448),c=n?n.prototype:void 0,s=c?c.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(o(t))return a(t,e)+"";if(u(t))return s?s.call(t):"";var r=t+"";return"0"==r&&1/t==-1/0?"-0":r}},1717:e=>{e.exports=function(e){return function(t){return e(t)}}},4757:e=>{e.exports=function(e,t){return e.has(t)}},1811:(e,t,r)=>{var n=r(1469),a=r(5403),o=r(5514),u=r(9833);e.exports=function(e,t){return n(e)?e:a(e,t)?[e]:o(u(e))}},6393:(e,t,r)=>{var n=r(3448);e.exports=function(e,t){if(e!==t){var r=void 0!==e,a=null===e,o=e==e,u=n(e),c=void 0!==t,s=null===t,i=t==t,l=n(t);if(!s&&!l&&!u&&e>t||u&&c&&i&&!s&&!l||a&&c&&i||!r&&i||!o)return 1;if(!a&&!u&&!l&&e<t||l&&r&&o&&!a&&!u||s&&r&&o||!c&&o||!i)return-1}return 0}},5022:(e,t,r)=>{var n=r(6393);e.exports=function(e,t,r){for(var a=-1,o=e.criteria,u=t.criteria,c=o.length,s=r.length;++a<c;){var i=n(o[a],u[a]);if(i)return a>=s?i:i*("desc"==r[a]?-1:1)}return e.index-t.index}},4429:(e,t,r)=>{var n=r(5639)["__core-js_shared__"];e.exports=n},9291:(e,t,r)=>{var n=r(8612);e.exports=function(e,t){return function(r,a){if(null==r)return r;if(!n(r))return e(r,a);for(var o=r.length,u=t?o:-1,c=Object(r);(t?u--:++u<o)&&!1!==a(c[u],u,c););return r}}},5063:e=>{e.exports=function(e){return function(t,r,n){for(var a=-1,o=Object(t),u=n(t),c=u.length;c--;){var s=u[e?c:++a];if(!1===r(o[s],s,o))break}return t}}},5393:(e,t,r)=>{var n=r(2663),a=r(3816),o=r(8748),u=RegExp("['’]","g");e.exports=function(e){return function(t){return n(o(a(t).replace(u,"")),e,"")}}},9389:(e,t,r)=>{var n=r(8674)({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"});e.exports=n},8777:(e,t,r)=>{var n=r(852),a=function(){try{var e=n(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=a},7114:(e,t,r)=>{var n=r(8668),a=r(2908),o=r(4757);e.exports=function(e,t,r,u,c,s){var i=1&r,l=e.length,f=t.length;if(l!=f&&!(i&&f>l))return!1;var p=s.get(e),d=s.get(t);if(p&&d)return p==t&&d==e;var b=-1,v=!0,y=2&r?new n:void 0;for(s.set(e,t),s.set(t,e);++b<l;){var m=e[b],h=t[b];if(u)var x=i?u(h,m,b,t,e,s):u(m,h,b,e,t,s);if(void 0!==x){if(x)continue;v=!1;break}if(y){if(!a(t,(function(e,t){if(!o(y,t)&&(m===e||c(m,e,r,u,s)))return y.push(t)}))){v=!1;break}}else if(m!==h&&!c(m,h,r,u,s)){v=!1;break}}return s.delete(e),s.delete(t),v}},8351:(e,t,r)=>{var n=r(2705),a=r(1149),o=r(7813),u=r(7114),c=r(8776),s=r(1814),i=n?n.prototype:void 0,l=i?i.valueOf:void 0;e.exports=function(e,t,r,n,i,f,p){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!f(new a(e),new a(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return o(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var d=c;case"[object Set]":var b=1&n;if(d||(d=s),e.size!=t.size&&!b)return!1;var v=p.get(e);if(v)return v==t;n|=2,p.set(e,t);var y=u(d(e),d(t),n,i,f,p);return p.delete(e),y;case"[object Symbol]":if(l)return l.call(e)==l.call(t)}return!1}},6096:(e,t,r)=>{var n=r(8234),a=Object.prototype.hasOwnProperty;e.exports=function(e,t,r,o,u,c){var s=1&r,i=n(e),l=i.length;if(l!=n(t).length&&!s)return!1;for(var f=l;f--;){var p=i[f];if(!(s?p in t:a.call(t,p)))return!1}var d=c.get(e),b=c.get(t);if(d&&b)return d==t&&b==e;var v=!0;c.set(e,t),c.set(t,e);for(var y=s;++f<l;){var m=e[p=i[f]],h=t[p];if(o)var x=s?o(h,m,p,t,e,c):o(m,h,p,e,t,c);if(!(void 0===x?m===h||u(m,h,r,o,c):x)){v=!1;break}y||(y="constructor"==p)}if(v&&!y){var g=e.constructor,O=t.constructor;g==O||!("constructor"in e)||!("constructor"in t)||"function"==typeof g&&g instanceof g&&"function"==typeof O&&O instanceof O||(v=!1)}return c.delete(e),c.delete(t),v}},1957:(e,t,r)=>{var n="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g;e.exports=n},8234:(e,t,r)=>{var n=r(8866),a=r(9551),o=r(3674);e.exports=function(e){return n(e,o,a)}},5050:(e,t,r)=>{var n=r(7019);e.exports=function(e,t){var r=e.__data__;return n(t)?r["string"==typeof t?"string":"hash"]:r.map}},1499:(e,t,r)=>{var n=r(9162),a=r(3674);e.exports=function(e){for(var t=a(e),r=t.length;r--;){var o=t[r],u=e[o];t[r]=[o,u,n(u)]}return t}},852:(e,t,r)=>{var n=r(8458),a=r(7801);e.exports=function(e,t){var r=a(e,t);return n(r)?r:void 0}},9607:(e,t,r)=>{var n=r(2705),a=Object.prototype,o=a.hasOwnProperty,u=a.toString,c=n?n.toStringTag:void 0;e.exports=function(e){var t=o.call(e,c),r=e[c];try{e[c]=void 0;var n=!0}catch(e){}var a=u.call(e);return n&&(t?e[c]=r:delete e[c]),a}},9551:(e,t,r)=>{var n=r(4963),a=r(479),o=Object.prototype.propertyIsEnumerable,u=Object.getOwnPropertySymbols,c=u?function(e){return null==e?[]:(e=Object(e),n(u(e),(function(t){return o.call(e,t)})))}:a;e.exports=c},4160:(e,t,r)=>{var n=r(8552),a=r(7071),o=r(3818),u=r(8525),c=r(577),s=r(4239),i=r(346),l="[object Map]",f="[object Promise]",p="[object Set]",d="[object WeakMap]",b="[object DataView]",v=i(n),y=i(a),m=i(o),h=i(u),x=i(c),g=s;(n&&g(new n(new ArrayBuffer(1)))!=b||a&&g(new a)!=l||o&&g(o.resolve())!=f||u&&g(new u)!=p||c&&g(new c)!=d)&&(g=function(e){var t=s(e),r="[object Object]"==t?e.constructor:void 0,n=r?i(r):"";if(n)switch(n){case v:return b;case y:return l;case m:return f;case h:return p;case x:return d}return t}),e.exports=g},7801:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},222:(e,t,r)=>{var n=r(1811),a=r(5694),o=r(1469),u=r(5776),c=r(1780),s=r(327);e.exports=function(e,t,r){for(var i=-1,l=(t=n(t,e)).length,f=!1;++i<l;){var p=s(t[i]);if(!(f=null!=e&&r(e,p)))break;e=e[p]}return f||++i!=l?f:!!(l=null==e?0:e.length)&&c(l)&&u(p,l)&&(o(e)||a(e))}},3157:e=>{var t=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;e.exports=function(e){return t.test(e)}},1789:(e,t,r)=>{var n=r(4536);e.exports=function(){this.__data__=n?n(null):{},this.size=0}},401:e=>{e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},7667:(e,t,r)=>{var n=r(4536),a=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(n){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return a.call(t,e)?t[e]:void 0}},1327:(e,t,r)=>{var n=r(4536),a=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return n?void 0!==t[e]:a.call(t,e)}},1866:(e,t,r)=>{var n=r(4536);e.exports=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=n&&void 0===t?"__lodash_hash_undefined__":t,this}},7285:(e,t,r)=>{var n=r(2705),a=r(5694),o=r(1469),u=n?n.isConcatSpreadable:void 0;e.exports=function(e){return o(e)||a(e)||!!(u&&e&&e[u])}},5776:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,r){var n=typeof e;return!!(r=null==r?9007199254740991:r)&&("number"==n||"symbol"!=n&&t.test(e))&&e>-1&&e%1==0&&e<r}},6612:(e,t,r)=>{var n=r(7813),a=r(8612),o=r(5776),u=r(3218);e.exports=function(e,t,r){if(!u(r))return!1;var c=typeof t;return!!("number"==c?a(r)&&o(t,r.length):"string"==c&&t in r)&&n(r[t],e)}},5403:(e,t,r)=>{var n=r(1469),a=r(3448),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,u=/^\w*$/;e.exports=function(e,t){if(n(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!a(e))||u.test(e)||!o.test(e)||null!=t&&e in Object(t)}},7019:e=>{e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},5346:(e,t,r)=>{var n,a=r(4429),o=(n=/[^.]+$/.exec(a&&a.keys&&a.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";e.exports=function(e){return!!o&&o in e}},5726:e=>{var t=Object.prototype;e.exports=function(e){var r=e&&e.constructor;return e===("function"==typeof r&&r.prototype||t)}},9162:(e,t,r)=>{var n=r(3218);e.exports=function(e){return e==e&&!n(e)}},7040:e=>{e.exports=function(){this.__data__=[],this.size=0}},4125:(e,t,r)=>{var n=r(8470),a=Array.prototype.splice;e.exports=function(e){var t=this.__data__,r=n(t,e);return!(r<0||(r==t.length-1?t.pop():a.call(t,r,1),--this.size,0))}},2117:(e,t,r)=>{var n=r(8470);e.exports=function(e){var t=this.__data__,r=n(t,e);return r<0?void 0:t[r][1]}},7518:(e,t,r)=>{var n=r(8470);e.exports=function(e){return n(this.__data__,e)>-1}},4705:(e,t,r)=>{var n=r(8470);e.exports=function(e,t){var r=this.__data__,a=n(r,e);return a<0?(++this.size,r.push([e,t])):r[a][1]=t,this}},4785:(e,t,r)=>{var n=r(1989),a=r(8407),o=r(7071);e.exports=function(){this.size=0,this.__data__={hash:new n,map:new(o||a),string:new n}}},1285:(e,t,r)=>{var n=r(5050);e.exports=function(e){var t=n(this,e).delete(e);return this.size-=t?1:0,t}},6e3:(e,t,r)=>{var n=r(5050);e.exports=function(e){return n(this,e).get(e)}},9916:(e,t,r)=>{var n=r(5050);e.exports=function(e){return n(this,e).has(e)}},5265:(e,t,r)=>{var n=r(5050);e.exports=function(e,t){var r=n(this,e),a=r.size;return r.set(e,t),this.size+=r.size==a?0:1,this}},8776:e=>{e.exports=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}},2634:e=>{e.exports=function(e,t){return function(r){return null!=r&&r[e]===t&&(void 0!==t||e in Object(r))}}},4523:(e,t,r)=>{var n=r(8306);e.exports=function(e){var t=n(e,(function(e){return 500===r.size&&r.clear(),e})),r=t.cache;return t}},4536:(e,t,r)=>{var n=r(852)(Object,"create");e.exports=n},6916:(e,t,r)=>{var n=r(5569)(Object.keys,Object);e.exports=n},1167:(e,t,r)=>{e=r.nmd(e);var n=r(1957),a=t&&!t.nodeType&&t,o=a&&e&&!e.nodeType&&e,u=o&&o.exports===a&&n.process,c=function(){try{return o&&o.require&&o.require("util").types||u&&u.binding&&u.binding("util")}catch(e){}}();e.exports=c},2333:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},5569:e=>{e.exports=function(e,t){return function(r){return e(t(r))}}},5357:(e,t,r)=>{var n=r(6874),a=Math.max;e.exports=function(e,t,r){return t=a(void 0===t?e.length-1:t,0),function(){for(var o=arguments,u=-1,c=a(o.length-t,0),s=Array(c);++u<c;)s[u]=o[t+u];u=-1;for(var i=Array(t+1);++u<t;)i[u]=o[u];return i[t]=r(s),n(e,this,i)}}},5639:(e,t,r)=>{var n=r(1957),a="object"==typeof self&&self&&self.Object===Object&&self,o=n||a||Function("return this")();e.exports=o},619:e=>{e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},2385:e=>{e.exports=function(e){return this.__data__.has(e)}},1814:e=>{e.exports=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}},61:(e,t,r)=>{var n=r(6560),a=r(1275)(n);e.exports=a},1275:e=>{var t=Date.now;e.exports=function(e){var r=0,n=0;return function(){var a=t(),o=16-(a-n);if(n=a,o>0){if(++r>=800)return arguments[0]}else r=0;return e.apply(void 0,arguments)}}},7465:(e,t,r)=>{var n=r(8407);e.exports=function(){this.__data__=new n,this.size=0}},3779:e=>{e.exports=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}},7599:e=>{e.exports=function(e){return this.__data__.get(e)}},4758:e=>{e.exports=function(e){return this.__data__.has(e)}},4309:(e,t,r)=>{var n=r(8407),a=r(7071),o=r(3369);e.exports=function(e,t){var r=this.__data__;if(r instanceof n){var u=r.__data__;if(!a||u.length<199)return u.push([e,t]),this.size=++r.size,this;r=this.__data__=new o(u)}return r.set(e,t),this.size=r.size,this}},5514:(e,t,r)=>{var n=r(4523),a=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,u=n((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(a,(function(e,r,n,a){t.push(n?a.replace(o,"$1"):r||e)})),t}));e.exports=u},327:(e,t,r)=>{var n=r(3448);e.exports=function(e){if("string"==typeof e||n(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},346:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},2757:e=>{var t="a-z\\xdf-\\xf6\\xf8-\\xff",r="A-Z\\xc0-\\xd6\\xd8-\\xde",n="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",a="["+n+"]",o="\\d+",u="["+t+"]",c="[^\\ud800-\\udfff"+n+o+"\\u2700-\\u27bf"+t+r+"]",s="(?:\\ud83c[\\udde6-\\uddff]){2}",i="[\\ud800-\\udbff][\\udc00-\\udfff]",l="["+r+"]",f="(?:"+u+"|"+c+")",p="(?:"+l+"|"+c+")",d="(?:['’](?:d|ll|m|re|s|t|ve))?",b="(?:['’](?:D|LL|M|RE|S|T|VE))?",v="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",y="[\\ufe0e\\ufe0f]?",m=y+v+"(?:\\u200d(?:"+["[^\\ud800-\\udfff]",s,i].join("|")+")"+y+v+")*",h="(?:"+["[\\u2700-\\u27bf]",s,i].join("|")+")"+m,x=RegExp([l+"?"+u+"+"+d+"(?="+[a,l,"$"].join("|")+")",p+"+"+b+"(?="+[a,l+f,"$"].join("|")+")",l+"?"+f+"+"+d,l+"+"+b,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",o,h].join("|"),"g");e.exports=function(e){return e.match(x)||[]}},5703:e=>{e.exports=function(e){return function(){return e}}},3816:(e,t,r)=>{var n=r(9389),a=r(9833),o=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,u=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");e.exports=function(e){return(e=a(e))&&e.replace(o,n).replace(u,"")}},7813:e=>{e.exports=function(e,t){return e===t||e!=e&&t!=t}},7361:(e,t,r)=>{var n=r(7786);e.exports=function(e,t,r){var a=null==e?void 0:n(e,t);return void 0===a?r:a}},9095:(e,t,r)=>{var n=r(13),a=r(222);e.exports=function(e,t){return null!=e&&a(e,t,n)}},6557:e=>{e.exports=function(e){return e}},5694:(e,t,r)=>{var n=r(9454),a=r(7005),o=Object.prototype,u=o.hasOwnProperty,c=o.propertyIsEnumerable,s=n(function(){return arguments}())?n:function(e){return a(e)&&u.call(e,"callee")&&!c.call(e,"callee")};e.exports=s},1469:e=>{var t=Array.isArray;e.exports=t},8612:(e,t,r)=>{var n=r(3560),a=r(1780);e.exports=function(e){return null!=e&&a(e.length)&&!n(e)}},4144:(e,t,r)=>{e=r.nmd(e);var n=r(5639),a=r(5062),o=t&&!t.nodeType&&t,u=o&&e&&!e.nodeType&&e,c=u&&u.exports===o?n.Buffer:void 0,s=(c?c.isBuffer:void 0)||a;e.exports=s},8446:(e,t,r)=>{var n=r(939);e.exports=function(e,t){return n(e,t)}},3560:(e,t,r)=>{var n=r(4239),a=r(3218);e.exports=function(e){if(!a(e))return!1;var t=n(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},1780:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},3218:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},7005:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},3448:(e,t,r)=>{var n=r(4239),a=r(7005);e.exports=function(e){return"symbol"==typeof e||a(e)&&"[object Symbol]"==n(e)}},6719:(e,t,r)=>{var n=r(8749),a=r(1717),o=r(1167),u=o&&o.isTypedArray,c=u?a(u):n;e.exports=c},1804:(e,t,r)=>{var n=r(5393)((function(e,t,r){return e+(r?"-":"")+t.toLowerCase()}));e.exports=n},3674:(e,t,r)=>{var n=r(4636),a=r(280),o=r(8612);e.exports=function(e){return o(e)?n(e):a(e)}},8306:(e,t,r)=>{var n=r(3369);function a(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var r=function(){var n=arguments,a=t?t.apply(this,n):n[0],o=r.cache;if(o.has(a))return o.get(a);var u=e.apply(this,n);return r.cache=o.set(a,u)||o,u};return r.cache=new(a.Cache||n),r}a.Cache=n,e.exports=a},9601:(e,t,r)=>{var n=r(371),a=r(9152),o=r(5403),u=r(327);e.exports=function(e){return o(e)?n(u(e)):a(e)}},9734:(e,t,r)=>{var n=r(1078),a=r(9556),o=r(5976),u=r(6612),c=o((function(e,t){if(null==e)return[];var r=t.length;return r>1&&u(e,t[0],t[1])?t=[]:r>2&&u(t[0],t[1],t[2])&&(t=[t[0]]),a(e,n(t,1),[])}));e.exports=c},479:e=>{e.exports=function(){return[]}},5062:e=>{e.exports=function(){return!1}},9833:(e,t,r)=>{var n=r(531);e.exports=function(e){return null==e?"":n(e)}},8748:(e,t,r)=>{var n=r(9029),a=r(3157),o=r(9833),u=r(2757);e.exports=function(e,t,r){return e=o(e),void 0===(t=r?void 0:t)?a(e)?u(e):n(e):e.match(t)||[]}},9470:t=>{"use strict";t.exports=e},4166:e=>{"use strict";e.exports=t},4076:e=>{"use strict";e.exports=r}},a={};function o(e){var t=a[e];if(void 0!==t)return t.exports;var r=a[e]={id:e,loaded:!1,exports:{}};return n[e](r,r.exports,o),r.loaded=!0,r.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.nmd=e=>(e.paths=[],e.children||(e.children=[]),e);var u={};return(()=>{"use strict";o.r(u),o.d(u,{render:()=>Ie});const e=window.wp.element,t=window.React;var r=o.n(t),n=o(4076),a=o(4166);function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function s(e,t){if(e){if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o=[],u=!0,c=!1;try{for(r=r.call(e);!(u=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);u=!0);}catch(e){c=!0,a=e}finally{try{u||null==r.return||r.return()}finally{if(c)throw a}}return o}}(e,t)||s(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t,r,n,a,o,u){try{var c=e[o](u),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,a)}function f(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function u(e){l(o,n,a,u,c,"next",e)}function c(e){l(o,n,a,u,c,"throw",e)}u(void 0)}))}}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const d=window.regeneratorRuntime;var b=o.n(d);function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function y(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var m=o(9470);function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}n.Utils.applyDiscount,(new Date).getTimezoneOffset();var O=JSON.stringify,j=o.g.fortressdbNonce,w=o.g.ajaxurl,E=void 0===w?"/wp-admin/admin-ajax.php":w,_=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=t}var t,r;return t=e,r=[{key:"url",value:function(){return"".concat(E,"?action=").concat("fortressdb_api_backend","&nonce=").concat(j)}},{key:"getCurlPayload",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=g(g({_method:e.toUpperCase(),_name:this.name},"auth/subscribe"===this.name?{_visitor:session.visitorId}:{}),t);return r}},{key:"request",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=g({_method:t,_name:this.name},r);e.accessToken&&(n._accessToken=e.accessToken);var a=new m.HttpRequest(this.url(),{method:"POST",cache:"no-cache",headers:{"Content-Type":"application/json"},body:O(n)});return a}},{key:"get",value:function(e){return this.request("GET",e)}},{key:"post",value:function(e){return this.request("POST",e)}},{key:"put",value:function(e){return this.request("PUT",e)}},{key:"delete",value:function(e){return this.request("DELETE",e)}}],r&&h(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}p(_,"accessToken","");var k=o.g,C=k.fortressdbSocketOptions,A=k.fortressdbInitialOptions,T=new m.Socket(P(P({},C||{}),{},{client:function(){return delete _.accessToken,new _("auth/subscribe").post().json()},storageName:"fortressdb_data",verify:function(){return A.userId===T.storage.getItem("userId")},onAuthenticate:function(){T.storage.setItem("userId",A.userId)}}));o.g.fortressdbBackendUrl,o.g.fortressdbBackendUrl,n.Utils.isDoubleTouch,n.Constants.LOCATIONS,n.Constants.DEFAULT_LOCATION,n.Utils.renderDOM,n.Utils.loadStripe,n.Utils.useDictionary,o.g.fdbLocale=o.g.fortressdbUserLocale,n.Utils.usePrevious,n.Utils.usePromise,n.Utils.useTimeout;var D=["string","text","integer","float","boolean","date","time","datetime","json","uuid","file","enum"];const N=[{value:"string",label:"String"},{value:"text",label:"Text"},{value:"integer",label:"Integer"},{value:"float",label:"Float"},{value:"boolean",label:"Boolean"},{value:"date",label:"Date"},{value:"time",label:"Time"},{value:"datetime",label:"Date Time"},{value:"json",label:"JSON"},{value:"uuid",label:"UUID"},{value:"file",label:"File"},{value:"enum",label:"Selection Field"}];var L=o(4184),I=o.n(L),M=o(1804),F=o.n(M);function U(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?U(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var z=n.Utils.useDictionary,B="fortressdb-page-tables";function R(t){var r=t.onClick;return(0,e.createElement)(a.Layout,{type:"row relative",className:"noselect"},(0,e.createElement)(a.Layout,{type:"row center",className:"fortressdb-field-card"},(0,e.createElement)(n.Button,{className:I()("fortressdb-field-control add"),onClick:r,icon:"add"})))}function V(r){var o=r.onSave,u=void 0===o?function(){}:o,c=r.onCancel,s=void 0===c?function(){}:c,l=r.onRemove,p=void 0===l?function(){}:l,d=r.hidden,m=void 0===d?function(){return!1}:d,h=r.isSecure,x=void 0!==h&&h,g=(0,t.useContext)(a.App.Context).state,O=!!(((g.license.currentPlanData||{}).restrictions||[]).find((function(e){return"serverEncryption"===e.name}))||{}).value,j=g.tables||{},w=j.current,E=j.watcher,_=i((0,t.useState)(!1),2),S=_[0],P=_[1],k=i((0,t.useState)(!1),2),C=k[0],A=k[1],T=i((0,t.useState)(!1),2),L=T[0],M=T[1],U=i((0,t.useState)(!1),2),R=U[0],V=U[1],H=i((0,t.useState)(!1),2),$=H[0],W=H[1],Z=i((0,t.useState)(!0),2),G=Z[0],J=Z[1],Y=i((0,t.useState)(0),2),K=Y[0],Q=Y[1],X=i((0,t.useState)(""),2),ee=X[0],te=X[1],re=i((0,t.useState)(null),2),ne=re[0],ae=re[1],oe=i((0,t.useState)(""),2),ue=oe[0],ce=oe[1],se=i((0,t.useState)(""),2),ie=se[0],le=se[1],fe=i((0,t.useState)(""),2),pe=fe[0],de=fe[1],be=z(),ve=(0,t.useMemo)((function(){return(r.enums||[]).map((function(e){return{label:e.name,value:e.id,disabled:C&&0===((r.enumsValues||{})[e.id]||[]).length}}))}),[r.enums,r.enumsValues,C]),ye=(0,t.useMemo)((function(){return function(e,t,r,n){if(t){var a=e[t].map((function(e){return{label:e.label,value:e.id}}));return r||n?a:[{label:"None",value:0}].concat(y(a))}}(r.enumsValues,K,C,L)}),[r.enumsValues,K,C,L]),me=(0,t.useCallback)((function(e){de(e),Q("enum"!==e&&"select"!==e?0:ve[0].value),te(function(e){switch(e){case"string":case"text":case"json":case"uuid":return String();case"integer":case"float":return Number();case"boolean":return Boolean();case"date":case"datetime":return(new Date).toISOString();case"time":case"enum":return 0;case"file":return null}}(e))}),[pe,ve]),he=(0,t.useCallback)((function(e){Q(e),te(ye[0].value)}),[ye]),xe=(0,t.useRef)({stateFromProps:function(e){e.opened&&J(!1);var t=e.extend,r=void 0===t?{}:t;ce(r.caption||""),le(r.placeholder||""),de(e.type||"string"),M(r.isMultiple||!1),r.enumId&&Q(r.enumId),te(void 0!==e.defaultValue?e.defaultValue:"enum"===e.type?[]:""),A(r.isMandatory||!1),V(r.indexed||!1),W(r.encrypted||!1)}}),ge=xe.current,Oe=(r.extend||{}).isSystem,je=g.options.isAdmin;(0,t.useEffect)((function(){ge.stateFromProps(r)}),[r]),(0,t.useEffect)((function(){var e=D.indexOf(pe)>=0;$&&!e&&W(!1)}),[pe,$]),(0,t.useEffect)((function(){$&&(C||R)&&W(!1)}),[$,C,R]);var we=(0,t.useCallback)(f(b().mark((function e(){var t,n,a;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P(!0),r.new?(n=w.fields.map((function(e){return e.extend.order})).sort((function(e,t){return e-t})).findIndex((function(e,t){return t<e})),a=n>=0?n:w.fields.length,t=[].concat(y(w.fields),[{type:pe,defaultValue:ee,extend:q(q({},"enum"===pe?{enumId:+K}:{}),{},{order:a,isSystem:!1,isMultiple:L,isMandatory:C,indexed:R,placeholder:ie,caption:ue},O&&$?{encrypted:!0}:{encrypted:!1})}])):t=w.fields.map((function(e){return r.name!==e.name?e:q(q({},e),{},{type:pe,defaultValue:ee,extend:q(q(q({},e.extend),"enum"===pe?{enumId:+K}:{}),{},{isMultiple:L,isMandatory:C,indexed:R,placeholder:ie,caption:ue},O&&$?{encrypted:$}:{encrypted:!1})})})),e.prev=2,e.next=5,E.put([{id:w.id,fields:t}]);case 5:J(!0),P(!1),u&&"function"==typeof u&&u(),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(2),console.error(e.t0),ae(e.t0.message),P(!1);case 15:case"end":return e.stop()}}),e,null,[[2,10]])}))),[ue,ie,ee,pe,K,C,L,R,$]),Ee=(0,t.useCallback)(f(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p(r.name);case 1:case"end":return e.stop()}}),e)}))),[]),_e=(0,t.useCallback)((function(){J(!1)}),[]),Se=(0,t.useCallback)((function(){s(),J(!0),ge.stateFromProps(r)}),[r]);if(m(r))return null;var Pe=Oe||!je||x,ke=D.indexOf(pe)>=0&&!C&&!R,Ce=(r.extend||{}).source,Ae=Ce&&"object"===v(Ce);return(0,e.createElement)("div",{className:I()("".concat(B,"__field-card"),!G&&"".concat(B,"__field-card_opened"))},(0,e.createElement)(n.Notify,{wide:!0,message:ne,onClear:function(){return ae(null)}}),G?(0,e.createElement)("div",{className:"".concat(B,"__field-card-header")},(0,e.createElement)("div",{className:"".concat(B,"__field-card-title")},ue),(0,e.createElement)("div",{className:"".concat(B,"__field-card-controls")},(0,e.createElement)(n.Button,{disabled:S,onClick:_e,title:be(je&&!Oe?"edit":"view"),icon:"edit"}),(0,e.createElement)(n.Button,{disabled:Oe||!je||Ae||S,onClick:Ee,title:be("delete"),icon:"delete"}))):(0,e.createElement)(t.Fragment,null,(0,e.createElement)("div",{className:"".concat(B,"__field-card-header")},(0,e.createElement)("div",{className:"".concat(B,"__field-card-controls")},(0,e.createElement)(n.Button,{disabled:S,onClick:Se,title:be("cancel"),icon:"cancel"}),(0,e.createElement)(n.Button,{disabled:Oe||!je||S,onClick:we,title:be("save"),icon:"save"}))),(0,e.createElement)("div",{className:"".concat(B,"__field-card-properties")},Ae&&(0,e.createElement)(a.Layout,{type:"row align horizontal",className:"fortressdb-field-integration"},(0,e.createElement)(a.Layout,{type:"background contain",className:"fortressdb-field-integration-icon ".concat(F()(Ce.name))}),(0,e.createElement)(a.Layout,null,be("managed-by-x",Ce.name))),(0,e.createElement)(a.Property,{autoFocus:!0,title:"Label",disabled:Pe,type:"string",value:ue,changeValue:ce}),(0,e.createElement)(a.Property,{title:"Placeholder",disabled:Pe,type:"string",value:ie,changeValue:le}),(0,e.createElement)(a.Property,{title:"Type",disabled:Pe||Ae,type:"select",options:N,defaultValue:"string",value:pe,changeValue:me}),"enum"===pe&&(0,e.createElement)(a.Property,{title:"Selection Field",disabled:Pe,type:"select",isMandatory:C,options:ve,value:K,changeValue:he}),"file"!==pe&&("enum"!==pe||K)&&(0,e.createElement)(a.Property,{title:"Default Value",disabled:Pe||Ae,type:pe,reverseOrder:"checkbox"===pe||"boolean"===pe,isMultiple:L,isMandatory:C,options:ye,value:ee,defaultValue:"enum"===pe?0:"",changeValue:te}),"enum"===pe?(0,e.createElement)(a.Property,{title:"Is Multiple",disabled:Pe||$,type:"boolean",value:L,changeValue:M}):null,(0,e.createElement)(a.Property,{title:"Is Mandatory",disabled:Pe||$,type:"boolean",value:C,changeValue:A}),(0,e.createElement)(a.Property,{title:"Indexed",disabled:Pe||$,type:"boolean",value:R,changeValue:V}),O&&(0,e.createElement)(a.Property,{title:"Encrypted",disabled:Oe||!je||!ke,type:"boolean",value:$,changeValue:W}))),S&&(0,e.createElement)(n.Spinner,null))}R.displayName="AddField",V.displayName="FieldCard";var H=o(9734),$=o.n(H);function W(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?W(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var G=new a.Watcher("enums"),J=new a.Watcher("enum_values");function Y(r){var a=i((0,t.useState)(null),2),o=a[0],u=a[1],c=i((0,t.useState)(null),2),s=c[0],l=c[1],f=i((0,t.useState)(!0),2),d=f[0],b=f[1],v=i((0,t.useState)(!1),2),y=v[0],m=v[1],h=(0,t.useRef)({updateEnums:function(e,t){if(t);else{var r=e.rows;u(r)}},updateEnumsValues:function(e,t){if(t);else{var r=Object.keys(e).reduce((function(t,r){return Z(Z({},t),{},p({},r,$()(e[r].rows,"options.order")))}),{});l(r)}}}).current;return(0,t.useEffect)((function(){return b(!0),G.subscribe({filter:{},context:{}},h.updateEnums).finally((function(){b(!1)})),function(){G.unsubscribe()}}),[]),(0,t.useEffect)((function(){if(o&&o.length)return m(!0),J.subscribe({filter:{},context:{enumId:o.map((function(e){return e.id}))}},h.updateEnumsValues).finally((function(){m(!1)})),function(){J.unsubscribe()}}),[o]),d||y?(0,e.createElement)(n.Spinner,null):r.children(Z(Z({},r),{},{enums:o,enumsValues:s}))}var K=o(454),Q=o.n(K);function X(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ee(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?X(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var te=n.Utils.useDictionary;function re(r){var o=r.isSecure,u=void 0!==o&&o,c=i((0,t.useState)(!1),2),s=c[0],l=c[1],p=i((0,t.useState)(!0),2),d=p[0],v=p[1],y=i((0,t.useState)(null),2),m=y[0],h=y[1],x=i((0,t.useState)(!1),2),g=x[0],O=x[1],j=(0,t.useContext)(a.App.Context).state,w=j.tables,E=(w=void 0===w?{}:w).current,_=w.watcher,S=j.options.isAdmin,P=(0,t.useCallback)((function(){l(!1)}),[]),k=i((0,t.useState)($()((E||{}).fields||[],"extend.order")),2),C=k[0],A=k[1],T=(0,t.useRef)({currentTable:E}).current,D=(0,t.useMemo)((function(){return E?E!==T.currentTable?$()(E.fields,"extend.order"):C:[]}),[E,C]),N=(0,t.useMemo)((function(){return d?D.filter((function(e){return e.extend&&!e.extend.isHidden&&!e.extend.isSystem})):D.filter((function(e){return e.extend&&!e.extend.isHidden}))}),[D,d]),L=(0,t.useCallback)((function(e){var t=e.oldIndex,r=e.newIndex;if(t!==r){var n=D.indexOf(N[t]),a=r+(n-t),o=Math.min(n,a),u=Math.max(n,a),c=Q()(D,n,a).map((function(e,t){return ee(ee({},e),{},{extend:ee(ee({},e.extend),{},{order:o<=t&&t<=u?t:e.extend.order})})}));A(c),_.put([{id:E.id,fields:c}])}}),[D,N,E]),M=(0,t.useCallback)(f(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.put([{id:E.id,fields:D.filter((function(e){return m!==e.name})).map((function(e,t){var r=e.extend.order;return ee(ee({},e),{},{extend:ee(ee({},e.extend),{},{order:r-t==1?t:r})})}))}]);case 2:return e.abrupt("return",!0);case 3:case"end":return e.stop()}}),e)}))),[E,D,m]),F=te();return(0,t.useEffect)((function(){T.currentTable=E}),[E]),(0,e.createElement)(t.Fragment,null,(0,e.createElement)(n.Popup.Switcher,{active:s,onClose:P},(0,e.createElement)(n.Confirm,{popup:{id:"REMOVE_FIELD",title:F("remove-field")},question:F("please-confirm"),onConfirm:M})),(0,e.createElement)(a.Layout,{type:"flex"},E&&(0,e.createElement)(a.Layout,{type:"row align vertical",style:{marginBottom:"0.5em"}},(0,e.createElement)(n.Input,{type:"checkbox",checked:d,onChange:function(e){var t=e.target;return v(t.checked)}}),"Hide System Fields"),(0,e.createElement)(Y,null,(function(r){var n=r.enums,o=r.enumsValues;return(0,e.createElement)(t.Fragment,null,E&&(0,e.createElement)(a.SortableList,{key:E.id,element:(0,e.createElement)(V,{enumsValues:o,enums:n,hidden:function(e){return d&&e.extend.isSystem},onRemove:function(e){h(e),l("REMOVE_FIELD")},isSecure:u}),footer:!S||u?null:g?(0,e.createElement)(V,{enumsValues:o,enums:n,new:!0,opened:!0,onSave:function(){return O(!1)},onCancel:function(){return O(!1)}}):(0,e.createElement)(R,{onClick:O}),items:N,accessorId:"name",lockAxis:"y",disabled:!S,pressDelay:200,helperClass:I()("fdb-component-app","".concat("fortressdb-page-tables","__field-card_sorting"),"fortressdb-page","fortressdb-sortable"),onSortEnd:L}))}))))}re.displayName="Fields";var ne=o(8446),ae=o.n(ne);function oe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ue(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ce=n.Utils.useDictionary,se=new a.Endpoint("options"),ie=r().useCallback,le=r().useState,fe=r().useContext,pe=r().useEffect,de=r().useMemo;function be(){var t=i(le(!1),2),r=t[0],o=t[1],u=i(le(null),2),c=u[0],s=u[1],l=fe(a.App.Context),d=l.state,v=l.dispatch,y=ce(),m=(d.tables||{}).current,h=d.options,x=de((function(){if(h&&m)return(h.permissions||{})[m.tableName]||{administrator:{create:!0,read:!0,update:!0,delete:!0}}}),[h,m]),g=i(le(x),2),O=g[0],j=g[1];pe((function(){x&&j(x)}),[x]);var w=de((function(){if(h){var e=h.roles;return Object.keys(e).sort().map((function(t){return{key:t,label:e[t]}}))}return[]}),[h]),E=!ae()(O,x);pe((function(){o(!1)}),[h]);var _=ie(f(b().mark((function e(){var t;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),e.prev=1,e.next=4,se.put({options:{permissions:ue(ue({},h.permissions||{}),{},p({},m.tableName,O))}}).json();case 4:t=e.sent,v({options:t}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),s(e.t0.message),o(!1);case 12:case"end":return e.stop()}}),e,null,[[1,8]])}))),[h,m,O]),S=ie((function(e){var t=e.target,r=t.checked,n=t.dataset,a=n.role,o=n.access,u=ue(ue({},O),{},p({},a,ue({},O[a]||{})));r?u=ue(ue({},O),{},p({},a,ue(ue({},O[a]||{}),{},p({},o,!0)))):(delete(u=ue(ue({},O),{},p({},a,ue({},O[a]||{}))))[a][o],Object.keys(u[a]).length||delete u[a]),j(u)}),[O]),P=ie((function(){j(x)}),[x]);if(!h||!m||!O)return!1;var k=[{access:null,label:y("user-role")},{access:"create",label:y("create")},{access:"read",label:y("read")},{access:"update",label:y("update")},{access:"delete",label:y("delete")}],C=h.isAdmin;return(0,e.createElement)(a.Layout,{type:"col flex relative",className:"fortressdb-access-rights"},(0,e.createElement)(n.Notify,{message:c,onClear:function(){return s(null)}}),(0,e.createElement)(a.Layout,{type:"row flex",className:"fortressdb-table"},k.map((function(t,o){var u=t.access,c=t.label,s=u&&!!(O["@all"]||{})[u];return(0,e.createElement)(a.Layout,{key:o,type:"col",className:"fortressdb-table-col"},(0,e.createElement)(a.Layout,{type:"row align vertical ".concat(0===o?"left":"horizontal"),className:"fortressdb-table-row"},c),w.map((function(t){var o=t.key,c=t.label,i=u&&!!(O[o]||{})[u];return(0,e.createElement)(a.Layout,{key:o,type:"row align vertical ".concat(u?"horizontal":"left"),className:"fortressdb-table-row"},u?(0,e.createElement)(n.Input,{type:"checkbox","data-role":o,"data-access":u,disabled:!C||s&&"@all"!==o||r,checked:i,onChange:S}):c)})))}))),(0,e.createElement)(a.Layout,{type:"row"},(0,e.createElement)(n.Button,{disabled:!C||!E||r,onClick:_},y("save")),(0,e.createElement)(n.Button,{disabled:!C||!E||r,onClick:P},y("cancel"))),r&&(0,e.createElement)(n.Spinner,null))}function ve(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ye(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ve(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}be.displayName="AccessRights";var me=n.Utils.useDictionary;function he(r){var o=r.secureForms,u=void 0!==o&&o,c=i((0,t.useState)(null),2),s=c[0],l=c[1],p=i((0,t.useState)(!1),2),d=p[0],v=p[1],y=(0,t.useContext)(a.App.Context),m=y.state,h=m.tables,x=m.options,g=y.dispatch,O=h||{},j=O.current,w=O.watcher,E=(0,t.useCallback)((function(e){g({tables:ye(ye({},h),{},{current:e})})}),[h]),_=(0,t.useCallback)(function(){var e=f(b().mark((function e(t){var r;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.post([t]);case 2:r=e.sent,E(r[0]);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[E]),S=(0,t.useCallback)(function(){var e=f(b().mark((function e(t){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.put([ye(ye({},t),{},{id:j&&j.id})]);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[E,j]),P=(0,t.useCallback)(f(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.delete({where:{id:j&&j.id}});case 2:E(null);case 3:case"end":return e.stop()}}),e)}))),[E,j]),k=x.isAdmin,C=void 0!==k&&k,A=(0,t.useCallback)((function(){v("CREATE_TABLE")}),[]),T=(0,t.useCallback)((function(){v("RENAME_TABLE")}),[]),D=(0,t.useCallback)((function(){v("REMOVE_TABLE")}),[]),N=me(),L=(0,t.useCallback)((function(){v(!1)}),[]),I=(0,t.useContext)(a.App.Context).state.license,M=(0,t.useMemo)((function(){return!!I&&!!I.resources&&I.resources.find((function(e){return"tables"===e.name})).allow}),[I]);return(0,e.createElement)(t.Fragment,null,(0,e.createElement)(n.Notify,{message:s,onClear:function(){return l(null)}}),(0,e.createElement)(n.Popup.Switcher,{active:d,onClose:L},(0,e.createElement)(a.NameForm,{propertyTitle:N("table-name"),popup:{id:"CREATE_TABLE",title:N("create-table")},action:_}),(0,e.createElement)(a.NameForm,{propertyTitle:N("table-name"),popup:{id:"RENAME_TABLE",title:N("rename-table")},data:{name:j&&j.name},action:S}),(0,e.createElement)(a.NameForm,{propertyTitle:N("table-name"),disabled:!0,popup:{id:"REMOVE_TABLE",title:N("remove-table")},data:{name:j&&j.name},confirmText:N("confirm"),action:P})),(0,e.createElement)(a.SelectTable,{onError:l,selectForms:u?"secure":"custom"}),C&&(0,e.createElement)(a.PageHeader.Buttons,null,!u&&(0,e.createElement)(a.PageHeader.Button,{onClick:A,icon:"add",disabled:!M},N("new")),(0,e.createElement)(a.PageHeader.Button,{onClick:T,disabled:!j,icon:"edit"},N("rename")),(0,e.createElement)(a.PageHeader.Button,{onClick:D,disabled:!j,icon:"delete"},N("delete"))))}function xe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ge(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xe(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}he.displayName="TableSelector";var Oe=n.Utils.useDictionary,je="1 week",we=new a.Watcher("objects"),Ee=new a.Watcher("objects"),_e=new a.Watcher("objects"),Se=new a.Watcher("objects");function Pe(){var r=i((0,t.useState)(!1),2),o=r[0],u=r[1],c=i((0,t.useState)(null),2),s=c[0],l=c[1],f=i((0,t.useState)(je),2),p=f[0],d=f[1],b=i((0,t.useState)([]),2),v=b[0],y=b[1],h=i((0,t.useState)([]),2),x=h[0],g=h[1],O=i((0,t.useState)([]),2),j=O[0],w=O[1],E=i((0,t.useState)([]),2),_=E[0],S=E[1],P=(0,t.useContext)(a.App.Context).state,k=P.license,C=(P.tables||{}).current,A=Oe(),T=(0,t.useCallback)((function(e,t){t?l(t.message):y(e)}),[]),D=(0,t.useCallback)((function(e,t){t?l(t.message):g(e)}),[]),N=(0,t.useCallback)((function(e,t){t?l(t.message):w(e)}),[]),L=(0,t.useCallback)((function(e,t){t?l(t.message):S(e)}),[]),I=(0,t.useMemo)((function(){return(((k||{}).currentPlanData||{}).restrictions||[]).find((function(e){return"dataHistory"===e.name}))||{value:1}}),[k]);(0,t.useEffect)((function(){if(C){u(!0);var e=m.query.fn("date_trunc",m.query.val("day"),"createdAt"),t=m.query.fn("to_char","createdAt",m.query.val("Dy"));return we.subscribe({context:{tableName:C.tableName},raw:!0,filter:ge({attributes:[m.query.fn("count","id").as("rows"),e.clone().as("createdAt"),t.clone().as("dayOfWeek")],group:[e,t],order:[m.query.orderBy(e)]},""===p?{}:{where:m.query.op(">=","createdAt",m.query.fn("date_trunc",m.query.val("day"),m.query.lit("CURRENT_TIMESTAMP - interval '".concat(p,"'"))))})},T).catch((function(e){l(e.message)})).finally((function(){u(!1)})),function(){we.unsubscribe()}}}),[C,p]),(0,t.useEffect)((function(){if(C)return Ee.subscribe({context:{tableName:C.tableName},raw:!0,filter:{attributes:[m.query.fn("count",m.query.lit("*")).as("rows")]}},D).catch((function(e){l(e.message)})),function(){Ee.unsubscribe()}}),[C]),(0,t.useEffect)((function(){if(C)return _e.subscribe({context:{tableName:C.tableName},raw:!0,filter:{attributes:[m.query.fn("count",m.query.lit("*")).as("rows")],where:m.query.op(">=","createdAt",m.query.fn("date_trunc",m.query.val("day"),m.query.lit("CURRENT_TIMESTAMP - interval '7 days'")))}},N).catch((function(e){l(e.message)})),function(){_e.unsubscribe()}}),[C]),(0,t.useEffect)((function(){if(C)return Se.subscribe({context:{tableName:C.tableName},raw:!0,filter:{attributes:[m.query.fn("count",m.query.lit("*")).as("rows")],where:m.query.op(">=","createdAt",m.query.fn("date_trunc",m.query.val("day"),m.query.lit("CURRENT_TIMESTAMP")))}},L).catch((function(e){l(e.message)})),function(){Se.unsubscribe()}}),[C]);var M=(0,t.useMemo)((function(){var e=[{value:je,label:"7 days"},{value:"1 month",label:"1 month"}],t=I.value;return(-1===t||t>1)&&(e.push({value:"3 months",label:"3 months"}),-1===t?e.push({value:"",label:"all time"}):e.push({value:"24 months",label:"24 months"})),e}),[I]),F=(0,t.useMemo)((function(){return M.map((function(e){return{value:e.value,label:e.label}}))}),[M]),U=(0,t.useCallback)((function(e){var t=e.value;return d(t)}),[]),q=(0,t.useMemo)((function(){return{name:"Column",className:"ColumnChart",version:"current",packages:["corechart"],options:{width:"100%",height:500}}}),[]),z=(0,t.useMemo)((function(){return{cols:[{type:p===je?"string":"date",caption:"Date"},{type:"number",caption:"Rows"}],rows:v.map((function(e){var t=e.createdAt,r=e.dayOfWeek,n=e.rows;return[p===je?r:new Date(t),n]}))}}),[v,p]);return(0,e.createElement)(a.Layout,{type:"col flex relative"},(0,e.createElement)(n.Notify,{message:s,onClear:function(){return l(null)}}),C&&(0,e.createElement)(t.Fragment,null,(0,e.createElement)(a.Layout,{type:"row wrap space between"},(0,e.createElement)(a.Layout,{type:"row",className:"fortressdb-table-stats-property"},1===I.value?(0,e.createElement)(a.Layout,null,A("total-rows-month")+":"):-1===I.value?(0,e.createElement)(a.Layout,null,A("total-rows")+":"):(0,e.createElement)(a.Layout,null,A("total-rows-x-months",I.value)+":"),(0,e.createElement)(a.Layout,null,(x[0]||{}).rows||0)),(0,e.createElement)(a.Layout,{type:"row",className:"fortressdb-table-stats-property"},(0,e.createElement)(a.Layout,null,A("new-rows-week")+":"),(0,e.createElement)(a.Layout,null,(j[0]||{}).rows||0)),(0,e.createElement)(a.Layout,{type:"row",className:"fortressdb-table-stats-property"},(0,e.createElement)(a.Layout,null,A("new-rows-today")+":"),(0,e.createElement)(a.Layout,null,(_[0]||{}).rows||0))),(0,e.createElement)(a.Layout,{type:"row"},(0,e.createElement)(a.Layout,{type:"row wrap align vertical",className:"fortressdb-table-stats-property"},(0,e.createElement)(a.Layout,null,A("chart-period")+":"),(0,e.createElement)(n.Select,{options:F,value:F.find((function(e){return e.value===p})),onChange:U}))),(0,e.createElement)(a.Layout,{type:"row"},(0,e.createElement)(n.Chart,{chart:q,dataTable:z}))),o&&(0,e.createElement)(n.Spinner,null))}Pe.displayName="TableStats";var ke=n.Utils.useDictionary,Ce=n.Tabs.Contents,Ae=n.Tabs.Tag,Te=n.Tabs.Page,De="fortressdb-page-tables";function Ne(r){var o=r.secureForms,u=void 0!==o&&o,c=i((0,t.useState)(null),2),s=c[0],l=c[1],f=(0,t.useContext)(a.App.Context).state,p=f.options,d=f.tables,b=(d=void 0===d?{}:d).current,v=!!(p||{}).connected,y=ke();return(0,t.useEffect)((function(){v||l(y("plugin-not-connected"))}),[v]),(0,e.createElement)("div",{className:De},(0,e.createElement)(n.Notify,{message:s,onClear:function(){return l(null)}}),v&&(0,e.createElement)(t.Fragment,null,(0,e.createElement)(a.PageHeader.Component,{title:"Tables"},(0,e.createElement)(he,{secureForms:u})),(0,e.createElement)("div",{className:I()("".concat(De,"__body"),!b&&"".concat(De,"__body_no-actions"))},(0,e.createElement)(n.Tabs.Component,{defaultTab:"data"},(0,e.createElement)(Ce,null,(0,e.createElement)(Ae,{tabId:"data"},y("data")),(0,e.createElement)(Ae,{tabId:"fields"},y("fields")),(0,e.createElement)(Ae,{tabId:"access-rights"},y("access-rights")),(0,e.createElement)(Ae,{tabId:"stats"},y("stats")),(0,e.createElement)(Ae,{tabId:"search-history"},y("search-history"))),(0,e.createElement)(Te,{tabId:"data"},(0,e.createElement)(a.DataTable.Component,{table:b})),(0,e.createElement)(Te,{tabId:"fields"},(0,e.createElement)(re,{isSecure:u})),(0,e.createElement)(Te,{tabId:"access-rights"},(0,e.createElement)(be,null)),(0,e.createElement)(Te,{tabId:"stats"},(0,e.createElement)(Pe,null)),(0,e.createElement)(Te,{tabId:"search-history"},(0,e.createElement)(a.DataTable.Component,{table:b,searchHistory:!0}))))))}Ne.displayName="Tables";var Le=n.Utils.renderDOM;function Ie(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Le((0,e.createElement)(a.App.Provider,{license:!0},(0,e.createElement)(a.App.Component,null,(0,e.createElement)(Ne,{secureForms:r}))),t)}})(),u})()}));