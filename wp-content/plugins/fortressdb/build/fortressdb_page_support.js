/*! For license information please see fortressdb_page_support.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("fortressdb"),require("FDBLib").Components):"function"==typeof define&&define.amd?define("fortressdb",["fortressdb"],t):"object"==typeof exports?exports.fortressdb=t(require("fortressdb"),require("FDBLib").Components):(e.fortressdb=e.fortressdb||{},e.fortressdb.pages=e.fortressdb.pages||{},e.fortressdb.pages.support=t(e.fortressdb,e.FDBLib.Components))}(self,(function(e,t){return(()=>{var r={4184:(e,t)=>{var r;!function(){"use strict";var n={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var a=typeof r;if("string"===a||"number"===a)e.push(r);else if(Array.isArray(r)){if(r.length){var s=o.apply(null,r);s&&e.push(s)}}else if("object"===a)if(r.toString===Object.prototype.toString)for(var u in r)n.call(r,u)&&r[u]&&e.push(u);else e.push(r.toString())}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(r=function(){return o}.apply(t,[]))||(e.exports=r)}()},4166:t=>{"use strict";t.exports=e},4076:e=>{"use strict";e.exports=t}},n={};function o(e){var t=n[e];if(void 0!==t)return t.exports;var a=n[e]={exports:{}};return r[e](a,a.exports,o),a.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var a={};return(()=>{"use strict";o.r(a),o.d(a,{render:()=>_});const e=window.wp.element,t=window.React;var r=o(4076),n=o(4166);function s(e,t,r,n,o,a,s){try{var u=e[a](s),i=u.value}catch(e){return void r(e)}u.done?t(i):Promise.resolve(i).then(n,o)}function u(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function u(e){s(a,n,o,u,i,"next",e)}function i(e){s(a,n,o,u,i,"throw",e)}u(void 0)}))}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a=[],s=!0,u=!1;try{for(r=r.call(e);!(s=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{s||null==r.return||r.return()}finally{if(u)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const l=window.regeneratorRuntime;var p=o.n(l),f=o(4184),d=o.n(f),m=r.Utils.useDictionary,v=JSON.stringify,y=o.g.fortressdbNonce,b=o.g.ajaxurl,g=void 0===b?"/wp-admin/admin-ajax.php":b,h="fortressdb-page-support";function E(){var a,s=(0,t.useContext)(n.App.Context).state.options,i=c((0,t.useState)(""),2),l=i[0],f=i[1],b=s||{},E=c((0,t.useState)(b.email||""),2),x=E[0],_=E[1],w=c((0,t.useState)(""),2),S=w[0],j=w[1],C=c((0,t.useState)(b.name||""),2),N=C[0],A=C[1],O=c((0,t.useState)(!1),2),P=O[0],I=O[1],k=c((0,t.useState)(!1),2),T=k[0],B=k[1],F=c((0,t.useState)(!1),2),q=F[0],D=F[1],M=c((0,t.useReducer)((function(e){return e+1}),0),2),L=(M[0],M[1]),R=!!(s||{}).connected,U=m(),z=c((0,t.useState)({}),2),H=z[0],W=z[1],Z=function(e){return!!e},$=function(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())},J=function(e,t,r){H[e]=[],r(t)||(H[e]=["error"]),W(H),L()},G=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Z;return function(r){var n=r.target.value;e(n),J(r.target.id,n,t)}},K=function(e){return function(t){J(t.target.id,t.target.value,e)}},Q=G(_,$),V=G(A,Z),X=G(j,Z),Y=(0,t.useCallback)(u(p().mark((function e(){var t,r,a;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(null),D(!0),e.prev=2,t={name:N,email:x,message:S,includeExtra:P},r="".concat(g,"?action=").concat("fortressdb_support_form","&nonce=").concat(y),a=new n.HttpRequest(r,{method:"POST",cache:"no-cache",headers:{"Content-Type":"application/json"},body:v(t)}),e.next=8,a.json();case 8:o.g.location.reload(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),f(e.t0.message);case 14:return e.prev=14,D(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[2,11,14,17]])}))));return(0,t.useEffect)((function(){R||f(U("plugin-not-connected"))}),[R]),(0,t.useEffect)((function(){B(Z(N)&&Z(S)&&$(x))}),[N,x,S]),(0,e.createElement)("div",{className:d()(h,"fortressdb-page")},(0,e.createElement)(r.Notify,{message:l,onClear:function(){return f(null)}}),R&&(0,e.createElement)(t.Fragment,null,(0,e.createElement)(n.PageHeader.Component,{title:"Support"}),(0,e.createElement)("div",{className:"".concat(h,"__support-form")},(0,e.createElement)("div",{className:"".concat(h,"__support-property")},"Please use the following form to submit a support ticket."),(0,e.createElement)("div",{className:d()("".concat(h,"__support-property"),"".concat(h,"__support-property_email-name"))},(0,e.createElement)("div",null,(0,e.createElement)("div",null,U("name")),(0,e.createElement)(r.Input,{type:"text",Id:"support-name",className:d()(H["support-name"]),value:N,onChange:V,onBlur:K(Z)})),(0,e.createElement)("div",null,(0,e.createElement)("div",null,U("email")),(0,e.createElement)(r.Input,{type:"email",Id:"support-email",className:d()(H["support-email"]),value:x,onChange:Q,onBlur:K($)}))),(0,e.createElement)("div",{className:d()("".concat(h,"__support-property"),"".concat(h,"__support-property_message"))},(0,e.createElement)("div",null,(0,e.createElement)("div",null,U("message")),(0,e.createElement)(r.Textarea,{Id:"support-message",className:d()(H["support-message"]),value:S,onChange:X,onBlur:K(Z)}))),(0,e.createElement)("div",{className:d()("".concat(h,"__support-property"),"".concat(h,"__support-property_extra"))},(0,e.createElement)("div",null,(0,e.createElement)("div",null,"We can detect your enviroment automatically â€“ host, version of WordPress, other plugins, etc. This information is helpful for understanding any conflicts or issues you might have."),(0,e.createElement)("label",{htmlFor:"support-extra"},"Check this box if you want to include this."),(0,e.createElement)(r.Input,{type:"checkbox",Id:"support-extra",checked:P,onChange:(a=I,function(e){a(!!e.target.checked)}),disabled:!1}))),(0,e.createElement)("div",{className:d()("".concat(h,"__support-property"),"".concat(h,"__support-property_submit"))},(0,e.createElement)(r.Button,{onClick:Y,disabled:q||!T},U("submit")))),q&&(0,e.createElement)(r.Spinner,null)))}E.displayName="Support";var x=r.Utils.renderDOM;function _(t){x((0,e.createElement)(n.App.Provider,null,(0,e.createElement)(n.App.Component,null,(0,e.createElement)(E,null))),t)}})(),a})()}));